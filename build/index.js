(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var n in t)e.o(t,n)&&!e.o(a,n)&&Object.defineProperty(a,n,{enumerable:!0,get:t[n]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};e.d({},{H:()=>p});const a=window.wp.element,t=window.wp.components,n=window.wp.i18n,i=()=>{const e=[(0,n.__)("Admin Bar Tools uses the WordPress REST API for setting loading.","admin-bar-tools"),(0,n.__)("If you continue to see this error, the WordPress REST API may be disabled.","admin-bar-tools"),(0,n.__)("The WordPress REST API can be set up in a plugin or in your theme's functions.php file.","admin-bar-tools"),(0,n.__)("Please activate the WordPress REST API and try accessing it again.","admin-bar-tools")];return(0,a.createElement)(t.Panel,{header:(0,n.__)("API connection failed.","admin-bar-tools")},(0,a.createElement)(t.PanelBody,null,e.map(((e,n)=>(0,a.createElement)(t.PanelRow,{key:n},e)))))},s=window.wp.apiFetch;var l=e.n(s);const o=["psi","lh","gsc","gc","gi","bi","twitter","facebook","hatena"],r={ar:{id:"ar",name:"العربية"},bg_BG:{id:"bg",name:"Български"},ca:{id:"ca",name:"Català"},cs:{id:"cs",name:"Čeština"},da_DK:{id:"da",name:"Dansk"},da_DE:{id:"de",name:"Deutsch"},el:{id:"el",name:"Ελληνικά"},en_US:{id:"us",name:"English (United States)"},en_GB:{id:"en-GB",name:"English (UK)"},es_ES:{id:"es",name:"Español"},fi:{id:"fi",name:"Suomi"},tl:{id:"fil",name:"Tagalog"},fr_FR:{id:"fr",name:"Français"},hi_IN:{id:"hi",name:"हिन्दी"},hr:{id:"hr",name:"Hrvatski"},hu_HU:{id:"hu",name:"Magyar"},id_ID:{id:"id",name:"Bahasa Indonesia"},it_IT:{id:"it",name:"Italiano"},he_IL:{id:"iw",name:"עִבְרִית"},ja:{id:"ja",name:"日本語"},ko_KR:{id:"ko",name:"한국어"},lt_LT:{id:"lt",name:"Lietuvių kalba"},lv:{id:"lv",name:"Latviešu valoda"},nl_NL:{id:"nl",name:"Nederlands"},nb_NO:{id:"no",name:"Norsk bokmål"},pl_PL:{id:"pl",name:"Polski"},pt_BR:{id:"pt-BR",name:"Português do Brasil"},pt_PT:{id:"pt-PT",name:"Português"},ro_RO:{id:"ro",name:"Română"},ru_RU:{id:"ru",name:"Русский"},sk_SK:{id:"sk",name:"Slovenčina"},sl_SI:{id:"sl",name:"Slovenščina"},sr_RS:{id:"sr",name:"Српски језик"},sv_SE:{id:"sv",name:"Svenska"},th:{id:"th",name:"ไทย"},tr_TR:{id:"tr",name:"Türkçe"},uk:{id:"uk",name:"Українська"},vi:{id:"vi",name:"Tiếng Việt"},zh_CN:{id:"zh-CN",name:"简体中文"},zh_TW:{id:"zh-TW",name:"繁體中文"}},m=e=>{const{apiData:t,setApiData:i}=(0,a.useContext)(p);return((e,t)=>{const{apiData:i,setNoticeValue:s,setNoticeMessage:o,snackbarTimer:r}=(0,a.useContext)(p),m=(0,a.useRef)(!0);(0,a.useEffect)((()=>{m.current?m.current=!1:t&&(s(void 0),clearTimeout(r),l()({path:"/admin-bar-tools/v1/update",method:"POST",data:{[e]:t[e]}}).then((()=>{s("abt_success"),o((0,n.__)("Success.","admin-bar-tools"))})).catch((()=>{s("abt_error"),o((0,n.__)("Error.","admin-bar-tools"))})))}),[i])})(e,t),a=>{const n=JSON.parse(JSON.stringify({...t}));switch(e){case"items":"string"==typeof a&&(s=a,o.includes(s))&&(n.items[a].status=!n.items[a].status);break;case"locale":if("string"==typeof a){const e="https://developers.google.com/speed/pagespeed/insights/?hl=",t={url:`${e}${a}&url=`,adminurl:`${e}${a}`};n.items.psi.url=t.url,n.items.psi.adminurl=t.adminurl,n.locale=a}break;case"sc":"number"==typeof a&&(n.sc=a)}var s;i(n)}},d=(0,a.memo)((e=>{const{apiData:n}=(0,a.useContext)(p),{itemKey:i}=e,s=m(i);return(0,a.createElement)(a.Fragment,null,n&&Object.values(n.items).map((e=>(0,a.createElement)(t.CheckboxControl,{key:e.shortname,label:e.name,checked:e.status,onChange:()=>s(e.shortname)}))))})),c=e=>{const{apiData:i}=(0,a.useContext)(p),{itemKey:s}=e,l=m(s);return(0,a.createElement)(a.Fragment,null,i&&(0,a.createElement)(t.RadioControl,{selected:i.sc,options:[{label:(0,n.__)("I don't use it.","admin-bar-tools"),value:0},{label:(0,n.__)("Domain","admin-bar-tools"),value:1},{label:(0,n.__)("URL Prefix","admin-bar-tools"),value:2}],onChange:e=>l(Number(e))}))},u=(0,a.memo)((e=>{const{apiData:n}=(0,a.useContext)(p),{itemKey:i}=e,s=m(i);return(0,a.createElement)(a.Fragment,null,n&&(0,a.createElement)(t.SelectControl,{value:n.locale,options:Object.values(r).map((e=>({label:e.name,value:e.id}))),onChange:e=>s(e)}))})),_=e=>{const{classValue:t,title:n,children:i}=e;return(0,a.createElement)("div",{className:"abt-item-wrapper "+t},(0,a.createElement)("h2",null,n),i)},p=(0,a.createContext)({});(0,a.render)((0,a.createElement)((()=>{const[e,s]=(0,a.useState)(void 0),[o,r]=(0,a.useState)(!1),[m,h]=(0,a.useState)(void 0),[b,E]=(0,a.useState)(""),[g,v]=(0,a.useState)(0);return((e,t)=>{(0,a.useEffect)((()=>{l()({path:"/admin-bar-tools/v1/options"}).then((a=>{t(!1),e(a)})).catch((()=>{t(!0)}))}),[e])})(s,r),(0,a.useEffect)((()=>{m&&v(window.setTimeout((()=>{h(void 0)}),4e3))}),[m]),(0,a.createElement)("div",{id:"wrap"},(0,a.createElement)("h1",null,(0,n.__)("Admin Bar Tools Settings","admin-bar-tools")),m&&(0,a.createElement)(t.Snackbar,{className:m},b),e&&(0,a.createElement)(p.Provider,{value:{apiData:e,setApiData:s,setApiError:r,setNoticeValue:h,setNoticeMessage:E,snackbarTimer:g}},(0,a.createElement)(_,{title:(0,n.__)("Please select the items you want to display.","admin-bar-tools"),classValue:"select-display"},(0,a.createElement)(d,{itemKey:"items"})),(0,a.createElement)(_,{title:(0,n.__)("Choose how you want to register with Google SearchConsole.","admin-bar-tools"),classValue:"select-radio"},(0,a.createElement)(c,{itemKey:"sc"})),(0,a.createElement)(_,{title:(0,n.__)("Please set the location.","admin-bar-tools"),classValue:"select-location"},(0,a.createElement)(u,{itemKey:"locale"}))),!e&&!o&&(0,a.createElement)(t.Spinner,null),o&&(0,a.createElement)(i,null))}),null),document.getElementById("admin-bar-tools-settings"))})();